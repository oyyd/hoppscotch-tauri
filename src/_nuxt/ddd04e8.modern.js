(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{2088:function(t,e,o){"use strict";o.r(e);var r=o(12),n=(o(99),o(58),o(111),o(34),o(37),o(927),o(259),o(2)),i=o(17),a=o(20),l=o(82),s={};s.props={show:{key:"show",required:!0,type:Boolean}},s.setup=(t,e)=>{var o=e.emit,s=Object(a.b)(),c=Object(a.j)(),p=Object(a.d)(),u=Object(a.g)(l.g,[]),m=Object(a.g)(i.c,null),v=Object(n.m)(),d=Object(n.m)(),h=Object(n.a)((()=>JSON.stringify(u.value,null,2))),f=function(){var t=Object(r.a)((function*(){if(m.value)try{var t=yield s.$post("https://api.github.com/gists",{files:{"hoppscotch-environments.json":{content:h.value}}},{headers:{Authorization:"token ".concat(m.value.accessToken),Accept:"application/vnd.github.v3+json"}});c.success(p("export.gist_created").toString()),window.open(t.html_url)}catch(t){c.error(p("error.something_went_wrong").toString()),console.error(t)}else c.error(p("profile.no_permission").toString())}));return function(){return t.apply(this,arguments)}}(),g=()=>{c.success(p("state.file_imported").toString())},b=()=>{c.error(p("import.failed").toString())},y=function(){var t=Object(r.a)((function*(){var t=prompt(p("import.gist_url").toString());if(t)try{var{files:e}=yield s.$get("https://api.github.com/gists/".concat(t.split("/").pop()),{headers:{Accept:"application/vnd.github.v3+json"}}),o=JSON.parse(Object.values(e)[0].content);Object(l.n)(o),g()}catch(t){b(),console.error(t)}}));return function(){return t.apply(this,arguments)}}(),_=t=>{Object(l.c)(t),g()},O=t=>{var{name:e,values:o}=t,r={name:e,variables:[]};o.forEach((t=>{var{key:e,value:o}=t;return r.variables.push({key:e,value:o})})),_([r])};return{t:p,currentUser:m,options:v,inputChooseFileToImportFrom:d,createEnvironmentGist:f,readEnvironmentGist:y,hideModal:()=>{o("hide-modal")},openDialogChooseFileToImportFrom:()=>{d.value&&d.value.click()},importFromJSON:()=>{if(d.value)if(d.value.files&&0!==d.value.files.length){var t=new FileReader;t.onload=t=>{var{target:e}=t,o=e.result;if(o){var r=JSON.parse(o);if("environment"===r._postman_variable_scope||"globals"===r._postman_variable_scope)O(r);else if(r[0]){var[n,i]=Object.keys(r[0]);_(r)}else b()}else c.show(p("action.choose_file").toString())},t.readAsText(d.value.files[0]),d.value.value=""}else c.show(p("action.choose_file").toString())},exportJSON:()=>{var t=h.value,e=new Blob([t],{type:"application/json"}),o=document.createElement("a"),r=URL.createObjectURL(e);o.href=r,o.download="".concat(r.split("/").pop().split("#")[0].split("?")[0],".json"),document.body.appendChild(o),o.click(),c.success(p("state.download_started").toString()),setTimeout((()=>{document.body.removeChild(o),URL.revokeObjectURL(r)}),1e3)}}};var c=s,p=o(16),u=Object(p.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.show?o("SmartModal",{attrs:{title:""+t.t("environment.title"),"max-width":"sm:max-w-md"},on:{close:t.hideModal},scopedSlots:t._u([{key:"actions",fn:function(){return[o("span",[o("tippy",{ref:"options",attrs:{interactive:"",trigger:"click",theme:"popover",arrow:""},scopedSlots:t._u([{key:"trigger",fn:function(){return[o("ButtonSecondary",{directives:[{name:"tippy",rawName:"v-tippy",value:{theme:"tooltip"},expression:"{ theme: 'tooltip' }"}],attrs:{title:t.t("action.more"),svg:"more-vertical"}})]},proxy:!0}],null,!1,3953414183)},[t._v(" "),o("SmartItem",{attrs:{icon:"assignment_returned",label:t.t("import.from_gist")},nativeOn:{click:function(e){return function(){t.readEnvironmentGist(),t.options.tippy().hide()}.apply(null,arguments)}}}),t._v(" "),o("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{theme:"tooltip"},expression:"{ theme: 'tooltip' }"}],attrs:{title:t.currentUser?"github.com"!==t.currentUser.provider?""+t.t("export.require_github"):void 0:""+t.t("export.require_github")}},[o("SmartItem",{attrs:{disabled:!t.currentUser||"github.com"!==t.currentUser.provider,icon:"assignment_turned_in",label:t.t("export.create_secret_gist")},nativeOn:{click:function(e){return function(){t.createEnvironmentGist(),t.options.tippy().hide()}.apply(null,arguments)}}})],1)],1)],1)]},proxy:!0},{key:"body",fn:function(){return[o("div",{staticClass:"flex flex-col px-2 space-y-2"},[o("SmartItem",{attrs:{svg:"folder-plus",label:t.t("import.from_json")},nativeOn:{click:function(e){return t.openDialogChooseFileToImportFrom.apply(null,arguments)}}}),t._v(" "),o("input",{ref:"inputChooseFileToImportFrom",staticClass:"input",attrs:{type:"file",accept:"application/json"},on:{change:t.importFromJSON}}),t._v(" "),o("hr"),t._v(" "),o("SmartItem",{directives:[{name:"tippy",rawName:"v-tippy",value:{theme:"tooltip"},expression:"{ theme: 'tooltip' }"}],attrs:{title:t.t("action.download_file"),svg:"download",label:t.t("export.as_json")},nativeOn:{click:function(e){return t.exportJSON.apply(null,arguments)}}})],1)]},proxy:!0}],null,!1,2787536983)}):t._e()}),[],!1,null,null,null);e.default=u.exports;installComponents(u,{ButtonSecondary:o(83).default,SmartItem:o(126).default,SmartModal:o(108).default})}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1797:function(t,e,r){"use strict";r.r(e);var o=r(43),n=r(19),i=(r(64),r(4),r(122),r(59),r(133),r(525),r(11),r(75),r(66),r(997),r(314),r(134),r(2)),a=r(24),c=r(29),s=r(119),l={};l.props={show:{key:"show",required:!0,type:Boolean}},l.setup=function(t,e){var r=e.emit,l=Object(c.b)(),p=Object(c.j)(),u=Object(c.d)(),m=Object(c.g)(s.o,[]),d=Object(c.g)(a.c,null),v=Object(i.m)(),f=Object(i.m)(),h=Object(i.a)((function(){return JSON.stringify(m.value,null,2)})),g=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d.value){t.next=3;break}return p.error(u("profile.no_permission").toString()),t.abrupt("return");case 3:return t.prev=3,t.next=6,l.$post("https://api.github.com/gists",{files:{"hoppscotch-collections.json":{content:h.value}}},{headers:{Authorization:"token ".concat(d.value.accessToken),Accept:"application/vnd.github.v3+json"}});case 6:e=t.sent,p.success(u("export.gist_created").toString()),window.open(e.html_url),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),p.error(u("error.something_went_wrong").toString()),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}(),b=function(){p.success(u("state.file_imported").toString())},y=function(){p.error(u("import.failed").toString())},w=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var e,r,o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=prompt(u("import.gist_url").toString())){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,l.$get("https://api.github.com/gists/".concat(e.split("/").pop()),{headers:{Accept:"application/vnd.github.v3+json"}});case 6:r=t.sent,o=r.files,n=JSON.parse(Object.values(o)[0].content),Object(s.B)(n),b(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),y(),console.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(){return t.apply(this,arguments)}}();return{t:u,currentUser:d,options:v,inputChooseFileToImportFrom:f,createCollectionGist:g,readCollectionGist:w,hideModal:function(){r("hide-modal")},openDialogChooseFileToImportFrom:function(){f.value&&f.value.click()},importFromJSON:function(){if(f.value)if(f.value.files&&0!==f.value.files.length){var t=new FileReader;t.onload=function(t){var e=t.target.result;if(e){var r=JSON.parse(e);if(r[0]){var n=Object.keys(r[0]),i=Object(o.a)(n,3);i[0],i[1],i[2];Object(s.e)(r),b()}else y()}else p.show(u("action.choose_file").toString())},t.readAsText(f.value.files[0]),f.value.value=""}else p.show(u("action.choose_file").toString())},exportJSON:function(){var t=h.value,e=new Blob([t],{type:"application/json"}),r=document.createElement("a"),o=URL.createObjectURL(e);r.href=o,r.download="".concat(o.split("/").pop().split("#")[0].split("?")[0],".json"),document.body.appendChild(r),r.click(),p.success(u("state.download_started").toString()),setTimeout((function(){document.body.removeChild(r),URL.revokeObjectURL(o)}),1e3)}}};var p=l,u=r(23),m=Object(u.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.show?r("SmartModal",{attrs:{title:""+t.t("modal.collections"),"max-width":"sm:max-w-md"},on:{close:t.hideModal},scopedSlots:t._u([{key:"actions",fn:function(){return[r("span",[r("tippy",{ref:"options",attrs:{interactive:"",trigger:"click",theme:"popover",arrow:""},scopedSlots:t._u([{key:"trigger",fn:function(){return[r("ButtonSecondary",{directives:[{name:"tippy",rawName:"v-tippy",value:{theme:"tooltip"},expression:"{ theme: 'tooltip' }"}],attrs:{title:t.t("action.more"),svg:"more-vertical"}})]},proxy:!0}],null,!1,3953414183)},[t._v(" "),r("SmartItem",{attrs:{icon:"assignment_returned",label:t.t("import.from_gist")},nativeOn:{click:function(e){return function(){t.readCollectionGist(),t.options.tippy().hide()}.apply(null,arguments)}}}),t._v(" "),r("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{theme:"tooltip"},expression:"{ theme: 'tooltip' }"}],attrs:{title:t.currentUser?"github.com"!==t.currentUser.provider?""+t.t("export.require_github"):void 0:""+t.t("export.require_github")}},[r("SmartItem",{attrs:{disabled:!t.currentUser||"github.com"!==t.currentUser.provider,icon:"assignment_turned_in",label:t.t("export.create_secret_gist")},nativeOn:{click:function(e){return function(){t.createCollectionGist(),t.options.tippy().hide()}.apply(null,arguments)}}})],1)],1)],1)]},proxy:!0},{key:"body",fn:function(){return[r("div",{staticClass:"flex flex-col space-y-2 px-2"},[r("SmartItem",{attrs:{svg:"folder-plus",label:t.t("import.from_json")},nativeOn:{click:function(e){return t.openDialogChooseFileToImportFrom.apply(null,arguments)}}}),t._v(" "),r("input",{ref:"inputChooseFileToImportFrom",staticClass:"input",attrs:{type:"file",accept:"application/json"},on:{change:t.importFromJSON}}),t._v(" "),r("hr"),t._v(" "),r("SmartItem",{directives:[{name:"tippy",rawName:"v-tippy",value:{theme:"tooltip"},expression:"{ theme: 'tooltip' }"}],attrs:{title:t.t("action.download_file"),svg:"download",label:t.t("export.as_json")},nativeOn:{click:function(e){return t.exportJSON.apply(null,arguments)}}})],1)]},proxy:!0}],null,!1,1626986007)}):t._e()}),[],!1,null,null,null);e.default=m.exports;installComponents(m,{ButtonSecondary:r(104).default,SmartItem:r(149).default,SmartModal:r(130).default})}}]);